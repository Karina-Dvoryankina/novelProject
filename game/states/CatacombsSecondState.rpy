init python:
    class CatacombsSecondState(State):
        def Invoke(self, data):
            renpy.scene()
            renpy.show("bg catacombs")
            renpy.with_statement(fade)

            if data.branch == 3:
                ThirdBranchMemoryState().Invoke(data)

            renpy.music.play("bg_music.mp3")
            renpy.sound.play("steps.mp3")
            n("Алексей медленно продвигался вперёд по тёмному коридору, стараясь не обращать внимания на холод, сковывающий его мышцы. Фонарик в его руках слабо мерцал, отбрасывая на стены дрожащие тени. Каждый шаг отдавался глухим эхом, словно катакомбы отвечали ему своим зловещим дыханием. Он был настороже, прислушиваясь к каждому шороху, каждый звук мог означать очередную угрозу")
            renpy.sound.play("cry.mp3")
            renpy.pause(2.0)
            n("Как вдруг он услышал что-то необычное. Тихий плач, прерываемый всхлипами. Это было где-то впереди, за очередным поворотом. Алексей замер, пытаясь понять, не обманывают ли его слух воспоминания о давно утраченной человечности. Но нет, звук был реален. Он медленно двинулся вперёд, стараясь не издавать ни звука.")
            renpy.music.play("wary.mp3")
            renpy.show("zombi girl")
            renpy.with_statement(dissolve)
            n("За углом его фонарик выхватил из тьмы маленькую фигурку. Девочка, на вид не старше восьми лет, сидела на холодном полу, обхватив руками колени. Её лицо было скрыто за грязными, спутанными волосами, но она всё ещё плакала, беззащитно вздрагивая от рыданий. На ней была порванная и заляпанная кровью детская одежда. Алексей замер, не веря своим глазам.")
            renpy.hide("zombi girl")
            renpy.show("alexey normal")
            renpy.with_statement(dissolve)
            al("Эй... ты кто? Ты здесь одна?")
            renpy.hide("alexey normal")
            renpy.show("zombi girl")
            renpy.with_statement(dissolve)
            n("Девочка подняла голову, и в свете фонарика он увидел её глаза. Они были мёртвыми, лишёнными всякой жизни, чёрные, как бездонные пропасти. Но в этих глазах читалась боль, не детская, а какая-то звериная ярость. Её губы раздвинулись в нечеловеческом оскале, обнажив острые, как у хищника, зубы. Она издала утробное рычание и, как дикий зверь, бросилась на него")
            renpy.show("bg catacombs", [shake_large])
            n("Алексей не успел среагировать. Девочка прыгнула на него, повалив на пол. Он едва успел поставить руку, чтобы удержать её от укуса, но её силы были невообразимы для такого маленького тела. Она царапала его, кусала, издавая зловещие хрипы. Её когти впивались в его кожу, оставляя глубокие раны.")
            al("Чёрт, убери руки от меня!")
            n("Он изо всех сил оттолкнул её, но девочка снова бросилась вперёд, как обезумевший зверь. В панике Алексей подхватил арматуру, что упала рядом, и с яростным криком вонзил его ей в бок. Девочка завизжала, но не остановилась, только рванулась с ещё большей яростью. Он снова ударил, на этот раз по шее. Кровь брызнула на его лицо, но он не останавливался, ударяя снова и снова, пока девочка не затихла, обмякнув у него на руках.")
            renpy.hide("bg catacombs")
            renpy.show("bg catacombs")
            renpy.hide("zombi")
            n("Маленькое тело безжизненно рухнуло на пол, и в этот момент мир замер. В висках пульсировала кровь, его руки дрожали, и он тяжело дышал, глядя на бездыханное тело у своих ног. Несколько секунд он стоял так, не в силах осознать, что только что произошло.")
            choice = renpy.display_menu([
                ("Расплакаться",1),
                ("Усмехнуться",1)
            ])
            if choice == 1:
                renpy.music.play("sad.mp3")
                n("Алексей опустился на колени, его руки сжимали арматуру. Горячие слёзы хлынули из его глаз, расплываясь по грязным щекам. Он смотрел на мёртвое лицо маленькой девочки, её искажённое гримасой боли лицо, и его сердце сжалось в отчаянии.")
                renpy.show("alexey sad")
                renpy.with_statement(dissolve)
                al("Прости... Господи, прости меня... Я не хотел... я не хотел...")
                n("Он закрыл лицо руками, стараясь заглушить всхлипы. Перед ним лежала невинная жертва, и он был чудовищем, погрязшим в крови и боли.")
                if data.branch == 3:
                    renpy.hide("alexey")
                    renpy.with_statement(dissolve)
                    n("Ему казалось, что стены коридора сжимаются, сдавливая его в кольце, но это были не просто катакомбы. Всё вокруг внезапно изменилось, словно в один миг он перенёсся в другое место и время.")
                    renpy.sound.play("tinnitus.mp3")
                    renpy.show("bg flat")
                    renpy.show("alexey angry_3", [right])
                    renpy.show("elena cry", [left])
                    renpy.with_statement(fade)
                    n("Она стояла перед ним, её глаза были широко распахнуты от страха и мольбы. В её руках он заметил что-то маленькое, блестящее — шприц, наполненный светло-зелёной жидкостью. Антидот. Она так сказала.")
                    al("Что ты делаешь?! Ты прячешь это от меня? ")
                    n("Жена попятилась назад, прижимая шприц к груди, её голос дрожал, словно она знала, что словами его уже не остановить.")
                    el("Нет, Алексей, это не то, что ты думаешь. Это для тебя, чтобы спасти тебя… Пожалуйста, доверься мне…")
                    n("Но он уже ничего не слышал. В его сознании полыхала ярость, за ней — паранойя, порождённая долгими днями в страхе и боли. Всё, что он видел, — это предательство. Она тоже хотела его подчинить, как и все остальные. Она хотела его погубить. Безумие затмило его разум, как чёрный туман, отбрасывая в тень все тёплые воспоминания о ней.")
                    renpy.show("alexey angry_3", [alexey_kill_pos])
                    renpy.with_statement(dissolve)
                    n("Он бросился к ней, выхватывая шприц из её рук. Она вскрикнула, но не успела отступить. Алексей, охваченный слепой яростью, стиснул её запястье и резко вонзил иглу ей в шею.")
                    al("Ты не будешь больше управлять мной… Никто не будет…")
                    n("Жидкость из шприца быстро влилась в её тело, её глаза расширились, губы беззвучно шевелились, как будто она хотела что-то сказать, но воздух застыл в её лёгких. Она начала дрожать, словно под электрическим разрядом, а затем её руки бессильно упали. Она рухнула ему на руки, из её рта вырвался хриплый звук, похожий на последнее прощание.")
                    renpy.show("elena dead", [left])
                    renpy.with_statement(dissolve)
                    n("Алексей стоял неподвижно, сжимая пустой шприц, наблюдая, как жизнь уходит из её тела. Но даже когда она стала холодной, его разум не отпускала мысль, что это был акт защиты. Он спасался. От неё, от этого мира, от боли.")
                    renpy.sound.play("tinnitus.mp3")
                    renpy.scene()
                    renpy.show("bg catacombs")
                    renpy.with_statement(fade)
                    n("Внезапно он вновь оказался в тёмных катакомбах, спиной прислонившись к холодной стене. Его дыхание было сбивчивым, как будто он только что вынырнул из ледяной воды. Он дрожал всем телом, осознавая, что это не просто кошмар, а реальность, которую он не мог изменить. Алексей сжал голову руками, пытаясь вытеснить воспоминание, но оно, как отравленный кинжал, осталось в его сердце.")
                    renpy.show("alexey sad")
                    renpy.with_statement(dissolve)
                    al("Она хотела помочь… Она хотела спасти меня…")
                    n("Но теперь было слишком поздно. ")
                n("Он долго сидел на холодном полу, окружённый тьмой, чувствуя, как остатки человечности покидают его душу, оставляя лишь пустоту.")
                data.karma += 10
            elif choice == 2:
                renpy.music.play("wary.mp3")
                n("Алексей медленно поднялся, сжимая окровавленную арматуру. В его глазах зажглось что-то дикое, почти безумное. Он смотрел на мёртвую девочку и вдруг почувствовал странное удовлетворение. Её смерть принесла ему чувство превосходства, которое он давно не испытывал.")
                renpy.show("alexey angry")
                renpy.with_statement(dissolve)
                al("Ну что, маленький монстр, ты думала, что сможешь меня одолеть?")
                n("Он хрипло рассмеялся, вытирая кровь со своего лица, и пнул тело ногой. Адреналин всё ещё бурлил в его венах, и этот вкус жестокости будоражил его. Он осознавал, что не чувствует больше вины, только силу. Сила была теперь его единственным спутником в этом проклятом месте.")
                if data.branch == 3:
                    renpy.hide("alexey")
                    renpy.with_statement(dissolve)
                    n("Ему казалось, что стены коридора сжимаются, сдавливая его в кольце, но это были не просто катакомбы. Всё вокруг внезапно изменилось, словно в один миг он перенёсся в другое место и время.")
                    renpy.sound.play("tinnitus.mp3")
                    renpy.show("bg flat")
                    renpy.show("alexey angry_3", [right])
                    renpy.show("elena cry", [left])
                    renpy.with_statement(fade)
                    n("Она стояла перед ним, её глаза были широко распахнуты от страха и мольбы. В её руках он заметил что-то маленькое, блестящее — шприц, наполненный светло-зелёной жидкостью. Антидот. Она так сказала.")
                    al("Что ты делаешь?! Ты прячешь это от меня? ")
                    n("Жена попятилась назад, прижимая шприц к груди, её голос дрожал, словно она знала, что словами его уже не остановить.")
                    el("Нет, Алексей, это не то, что ты думаешь. Это для тебя, чтобы спасти тебя… Пожалуйста, доверься мне…")
                    n("Но он уже ничего не слышал. В его сознании полыхала ярость, за ней — паранойя, порождённая долгими днями в страхе и боли. Всё, что он видел, — это предательство. Она тоже хотела его подчинить, как и все остальные. Она хотела его погубить. Безумие затмило его разум, как чёрный туман, отбрасывая в тень все тёплые воспоминания о ней.")
                    renpy.show("alexey angry_3", [alexey_kill_pos])
                    renpy.with_statement(dissolve)
                    n("Он бросился к ней, выхватывая шприц из её рук. Она вскрикнула, но не успела отступить. Алексей, охваченный слепой яростью, стиснул её запястье и резко вонзил иглу ей в шею.")
                    al("Ты не будешь больше управлять мной… Никто не будет…")
                    n("Жидкость из шприца быстро влилась в её тело, её глаза расширились, губы беззвучно шевелились, как будто она хотела что-то сказать, но воздух застыл в её лёгких. Она начала дрожать, словно под электрическим разрядом, а затем её руки бессильно упали. Она рухнула ему на руки, из её рта вырвался хриплый звук, похожий на последнее прощание.")
                    renpy.show("elena dead", [left])
                    renpy.with_statement(dissolve)
                    n("Алексей стоял неподвижно, сжимая пустой шприц, наблюдая, как жизнь уходит из её тела. Но даже когда она стала холодной, его разум не отпускала мысль, что это был акт защиты. Он спасался. От неё, от этого мира, от боли.")
                    renpy.sound.play("tinnitus.mp3")
                    renpy.scene()
                    renpy.show("bg catacombs")
                    renpy.with_statement(fade)
                    n("Внезапно он вновь оказался в тёмных катакомбах, спиной прислонившись к холодной стене. Его дыхание было сбивчивым, как будто он только что вынырнул из ледяной воды. Он дрожал всем телом, осознавая, что это не просто кошмар, а реальность, которую он не мог изменить. Алексей сжал голову руками, пытаясь вытеснить воспоминание, но оно, как отравленный кинжал, осталось в его сердце.")
                    renpy.show("alexey contemptuous")
                    renpy.with_statement(dissolve)
                    al("Она виновата. Я просто защищался. Я вообще не осознавал себя, я не хотел быть лабораторной крысой.")
                    renpy.hide("alexey")
                    renpy.with_statement(dissovle)
                n("Он встал и пошёл дальше, с каждым шагом всё глубже погружаясь в тьму, которая пожирала его душу.")
                data.karma -= 10
        
            renpy.music.play("wary.mp3")
            n("Алексей брёл по туннелю, который, казалось, вел его в самое сердце мрака. Его фонарь, издавая слабое мерцание, выхватывал из тьмы отрывочные образы — груды костей, покосившиеся колонны. Коридор вдруг открылся в огромный подземный зал, напоминающий древний храм. Здесь время, казалось, остановилось: всё вокруг было погружено в зловещую, непроницаемую тишину.")
            renpy.hide("alexey")
            renpy.show("bg hall_catacombs")
            renpy.with_statement(fade)
            renpy.sound.play("lamp.mp3")
            renpy.show("zombi")
            renpy.with_statement(dissolve)
            n("Как только он шагнул в зал, внезапно зажглись потолочные лампы, издающие раздражающее гудение и иногда моргая. Пространство перед ним было заполнено десятками заражённых, которые стояли молча, как жуткие статуи, их глаза горели фанатичной преданностью. Но они не нападали. Вместо этого они раздвинулись, образуя проход к возвышению в центре зала.")
            renpy.hide("zombi")
            renpy.with_statement(dissolve)
            renpy.pause(1.0)
            renpy.show("queen", [right])
            renpy.show("alexey normal", [left])
            renpy.with_statement(dissolve)
            n("Алексей сжался от напряжения, но пошёл вперёд, осознавая, что отступать уже некуда. В центре зала его ждала Она — Королева Роя. Её фигура была высокой и изящной, прикрытая алыми тканями ее платья. Её глаза — два огненных рубина — всматривались прямо в его душу, пронзая его внутренние страхи и сомнения. ")
            n("Голос глубокий, вкрадчивый, словно у змеи.")
            q("Ах, Алексей... Как долго я ждала этой встречи. Ты так упорно шёл ко мне.")
            n("Её голос эхом разлетелся по залу, заставляя Алексея инстинктивно напрячься. Он чувствовал, как его разум окутывает плотное облако безумия, словно её слова были пропитаны чем-то нечеловеческим, затягивающим в бездну.")
            al("Что тебе нужно? Я не стану одним из твоих чудовищ.")
            n("Она усмехнулась, и звук её смеха отдался холодным, металлическим звоном по всему залу. Королева сделала шаг вперёд, её движения были плавными, почти гипнотизирующими. ")
            n("На мгновение Королева остановилась, пристально наблюдая за Алексеем, словно оценивая его. Внезапно с потолка упала тонкая нить слизи, касаясь его руки. Алексей вздрогнул, и на мгновение его фонарь выхватил что-то под ногами — старую, детскую игрушку, покрытую грязью и пылью.")
            
            renpy.show("toy")
            renpy.with_statement(dissolve)
            
            choice = renpy.display_menu([
                ("Поднять игрушку и спрятать её в карман", 1),
                ("Раздробить игрушку ногой", 2)
            ])

            renpy.hide("toy")
            renpy.with_statement(dissolve)

            if choice == 1:
                n("Алексей нагнулся, осторожно поднял игрушку и, на мгновение задумавшись, спрятал её в карман. Её маленькие, изношенные детали напомнили ему о потерянной человечности. В глазах Королевы мелькнуло что-то похожее на удивление.")
                q("Ты всё ещё цепляешься за человеческие чувства? Как трогательно... Но что будет, когда эти чувства станут твоим самым большим врагом?")
                data.karma += 10
            elif choice == 2:
                n("Алексей посмотрел на грязную игрушку, и не раздумывая, с силой раздавил её ногой. Хруст пластика разнёсся по залу, как отголосок ломающейся надежды. В глазах Королевы вспыхнуло одобрение.")
                q("Вот так-то лучше. Отбрось слабость и стань тем, кем ты всегда должен был быть.")
                data.karma -= 10
            q("Алексей... Тот, кто потерял всё. Тот, кто уже знает всю горькую правду. Ты ведь знаешь, кто виновен в смерти твоей жены, не так ли?")
            n("Алексей молчит, но его руки сжимаются в кулаки. Он давно уже раскрыл все карты этого кровавого заговора. Королева, словно чувствуя его сомнения и боль, продолжает, подбирая слова так, чтобы задеть его за живое.")

            if data.branch == 1:
                n("В ее голосе сквозила ирония.")
                q("Она доверяла ему... твоему шурину. Он был для неё семьёй, опорой. А он, как послушная собачонка, исполнил их приказы и лишил её жизни, зная, что делает. Каково это, Алексей? Жить с мыслью, что её брат стал её палачом?")
                renpy.show("alexey contemptuous", [left])
                renpy.with_statement(dissolve)
                n("Алексей скрежещет зубами, пытаясь подавить бурю эмоций.")
                q("Тебя использовали и выбросили, как ненужный мусор. У тебя больше ничего нет. Но у меня есть то, чего ты жаждешь больше всего — месть. Присоединись ко мне, и мы вместе разрушим их ложный мир. Эти крысы в бункере будут гореть за то, что они сделали с твоей семьёй.")
            elif data.branch == 2:
                n("Королева разыграла показную жалость.")
                q("Бедный Алексей... Ты видел, как её брат умолял о прощении. Но ведь ты понимаешь, что прощение здесь не поможет? Она мертва из-за его трусости и ошибок. Сколько раз ты прокручивал этот момент в голове, желая, чтобы он умер вместо неё?")
                renpy.sound.play("tinnitus.mp3")
                renpy.show("alexey ce", [left])
                renpy.with_statement(dissolve)
                q("Ты страдаешь за то, что не можешь исправить. Но я могу предложить тебе иной путь. Стань моим союзником, и я дам тебе силу, с которой ты никогда больше не будешь слабым. Вместе мы сметём этот мир лжи и ошибок.")
            elif data.branch == 3:
                q("Ты ведь помнишь, как это было, Алексей? Твои руки сжимали шприц, её глаза расширялись от ужаса... Ты убил её. И это не был вирус — это был ты. Вирус лишь раскрыл твою истинную сущность.")
                renpy.show("alexey sad", [left])
                renpy.with_statement(dissolve)
                n("Алексей вздрагивает, его взгляд становится пустым, полным отчаяния и вины.")
                q("Но разве это важно? Она уже мертва. А ты, убив её, стал сильнее, разве не так? Вспомни это чувство... силу, власть. Ты можешь испытать это снова. Присоединись ко мне, и весь мир будет у твоих ног. Мы вместе захватим этот бункер и уничтожим тех, кто тебе навредил.")
                n("Она замерла, её взгляд, казалось, прожигал его насквозь.")
                q("Ты знаешь, что бункер — последнее убежище этих жалких выживших. Но их время истекает. Я планирую захватить его, разрушить их иллюзию безопасности. Подчинись мне, Алексей, и ты станешь свидетелем новой эры, где нет места для слабых. Представь, какая мощь ждёт тебя, если ты примешь мой дар. Ты можешь быть моей правой рукой, командовать армией заражённых. Вместе мы подчиним этот мир.")
                n("Алексей почувствовал, как его охватывает дрожь. ")

            if data.karma <= 30:
                q("Королева наблюдала за ним с неким торжественным ожиданием. Её губы тронула лёгкая улыбка, а голос был мягким, как шелест тьмы.")
                renpy.show("alexey normal", [left])
                renpy.with_statement(dissolve)
                n("Алексей кивнул. Его глаза больше не отражали прежнего света — теперь они были холодны и пусты. Годы утрат и разочарований сделали его тем, кем он был сейчас: тенью человека, ведомой лишь жаждой мести.")
                renpy.show("alexey angry", [left])
                renpy.with_statement(dissolve)
                al("Я сражался за справедливость, но в этом мире нет правды. Только тьма и сила. Ты дала мне силу. Теперь я отдам тебе свою верность.")
                n("Королева протянула ему руку, её пальцы были длинными и изящными, как у древней богини. Алексей принял её жест, и на мгновение его тело охватил жар, словно тьма впилась в его душу, заполняя пустоту, которая была когда-то сердцем.")
                q("Теперь ты станешь моим преданным генералом. Вместе мы уничтожим этот гнилой мир и построим новый из его руин.")
                renpy.hide("alexey")
                renpy.hide("queen")
                renpy.with_statement(dissolve)
                n("Королева направила заражённых на штурм верхних уровней бункера, где жили остатки выживших. Сотни заражённых, ведомые безумной волей Королевы, с гулом ринулись вперёд. Алексей присоединился к армии, его глаза светились фанатичным огнём.")
                n("Заградительные барьеры не могли остановить их натиск. Алексей, вооружённый лишь арматурой, прорывался через защитников, словно вихрь смерти. Он разил солдат, не останавливаясь ни перед чем, каждый удар его был точен и смертелен. Крики раздавались повсюду, но его сердце было глухо к мольбам о пощаде.")

                renpy.show("bg hallway")
                renpy.show("nikolay normal_2", [right])
                renpy.show("alexey normal", [left])
                renpy.with_statement(fade)
                nik("Алексей! Это не ты! Ты должен остановиться! Это лекарство — наш последний шанс!")
                n("Но Алексей больше не был тем человеком, которого знал Николай. Он посмотрел на учёного, и в его глазах не было ни сожаления, ни колебания. Он одним ударом сбил Николая с ног и наступил на ампулу, раздавив её осколки.")
                renpy.hide("nikolay")
                renpy.with_statement(dissolve)
                al("Нет места для слабости в этом новом мире. Никакого спасения.")
                renpy.hide("alexey")
                renpy.show("bg meeting_room")
                renpy.show("president scared")
                renpy.with_statement(fade)
                n("Прорвавшись в центр командования, Алексей и его заражённые уничтожили последние очаги сопротивления. Высокопоставленные чиновники правительства, собравшиеся в зале для экстренных совещаний, замерли в ужасе, видя, как Алексей приближается к ним. Впереди него шли заражённые, чьи обезумевшие глаза сияли алым светом.")
                pr("Подумай, Алексей! Ты можешь получить всё, что захочешь! Власть, деньги...")
                n("Но Алексей больше не искал компромиссов. Он подошёл к командиру и безжалостно ударил его арматурой, оставляя кровавый след на стене.")
                renpy.hide("president scared")
                renpy.with_statement(dissolve)
                renpy.show("alexey angry")
                renpy.with_statement(dissolve)
                al("Я больше не играю по вашим правилам.")
                n("Заражённые, следуя его примеру, бросились на чиновников, разрывая их на куски. Это был конец власти, которая предала его и уничтожила всё, что он любил.")
                renpy.scene()
                renpy.show("bg black")
                renpy.with_statement(fade)
                renpy.music.play("bg_music.mp3")
                n("С падением бункера наступила новая эра. Армия заражённых, под покровительством Алексея и Королевы, захватила все оставшиеся островки цивилизации. Выжившие попали в рабство, а улизнувшие стали дичью, на которую велась охота.")
                n("Николай и те немногие, кто пытался создать антидот, либо погибли, либо стали подопытными для новых экспериментов Королевы. Теперь ничто не могло остановить её.")
            if data.karma >= 70:
                q("Ты наконец-то осознал, что все эти люди — лишь пешки. Вместе мы создадим новый мир, где слабым нет места.")
                n("Алексей на мгновение заколебался, зная, что у него не будет второго шанса. Но чтобы победить её и спасти бункер, ему пришлось притвориться.")
                renpy.show("alexey normal", [left])
                renpy.with_statement(dissolve)
                al("Ты права. Этот мир обречён. Давай положим конец всему этому.")
                renpy.show("queen", [queen_trans_pos])
                renpy.with_statement(dissolve)
                n("Королева довольна его ответом, приблизилась и коснулась его лица своими острыми пальцами, словно отмечая его переход на её сторону.")
                n("Алексей кивнул, скрывая свою истинную цель — уничтожить её и освободить бункер.")
                renpy.scene()
                renpy.show("bg black")
                renpy.with_statement(fade)
                n("Алексей и Королева повели армию заражённых в атаку на главный уровень бункера, где прятались остатки правительства. По пути они встретили яростное сопротивление: солдаты, установившие баррикады, и автоматические турели, охраняющие вход.")
                n("Но под командованием Алексея, заражённые, словно неудержимый поток, смели всё на своём пути. Он направлял их с точностью и хладнокровием, скрывая свои истинные намерения.")
                al("Не щадите никого из этих лжецов! Освободите бункер от их власти!")
                n("Но, несмотря на кажущуюся жестокость, Алексей тайно сдерживал заражённых, предотвращая нападения на мирных жителей и спасая тех, кто не был замешан в преступлениях.")
                n("В конечном итоге Алексей и заражённые прорвались к залу заседаний, где укрылись лидеры.")
                renpy.show("bg meeting_room")
                renpy.show("president scared")
                renpy.with_statement(fade)

                n("Королева торжественно вошла в зал, окружённая своими воинами. Власти в панике пыталось вести переговоры.")
                pr("Пожалуйста, пощадите нас! Мы можем заключить сделку!")
                n("Королева лишь усмехнулась, но прежде чем она успела отдать приказ об их уничтожении, Алексей выступил вперёд.")
                renpy.hide("president")
                renpy.show("alexey normal")
                renpy.with_statement(dissolve)
                al("Они уже не представляют угрозы. Мы можем использовать их знания для управления бункером.")
                n("Королева заколебалась, но всё же дала знак своим воинам остановиться. Это дало Алексею время, чтобы подготовить свой тайный план.")
                n("Среди людей он заметил Николая, который смотрел на него так, будто пытался что-то донести. Макаров, уловив момент, когда внимание Королевы было направлено не на него, подошел к Николаю.")
                n("Мужчина шепотом обратился к Макарову.")
                renpy.show("nikolay normal_2", [right])
                renpy.with_statement(dissolve)
                nik("У нас мало времени. Я подготовил антидот, мы можем остановить ее.")
                al("Нам нужно дождаться момента, когда она будет наиболее уязвима. ")
                renpy.hide("alexey")
                renpy.hide("nikolay")
                renpy.with_statement(dissolve)
                n("Алексей и Королева собрались на церемонию в центральном зале уровня, чтобы провозгласить новую эру. Королева, уверенная в своей победе, обратилась к жителям, обещая им \"новый мир\".")
                renpy.show("alexey normal", [right])
                renpy.show("queen", [left])
                renpy.with_statement(dissolve)
                q("Этот день войдёт в историю как момент, когда слабость была искоренена! Алексей и я станем правителями этого нового порядка!")
                renpy.show("alexey normal", [alexey_kill_pos])
                renpy.with_statement(dissolve)
                n("Алексей шагнул вперёд, словно собираясь поклясться в верности, но вместо этого молниеносно выхватил шприц с антидотом и вонзил его в руку Королевы.")
                q("Что... ты сделал?!")
                n("Антидот начал действовать мгновенно. Её лицо исказилось от боли, а её сила ослабла. Армия заражённых, потеряв связь с ней, стала дезориентированной и больше не подчинялась её воле.")
                al("Всему этому конец.")
                n("Королева, осознавая, что её контроль утерян, попыталась нанести последний удар, но Алексей увернулся и пробил её грудь арматурой, заставляя её тело рассыпаться в прах.")
                renpy.scene()
                renpy.show("bg black")
                renpy.with_statement(fade)
                renpy.music.play("bg_music.mp3")
                n("Смерть Королевы привела к окончанию её контроля над заражёнными. Люди, ранее порабощённые вирусом, начали приходить в себя. Алексей и Николай использовали оставшиеся запасы антидота, чтобы исцелить тех, кто ещё был под воздействием.")
                n("Теперь, когда и старое правительство, и Королева были побеждены, бункеру требовалось новое руководство. Алексей отказался от личной власти, предложив учредить Совет, который будет состоять из представителей разных групп выживших.")
                al("Этот день — новая глава для всех нас. Мы больше не будем жить в страхе и тирании.")
                n("Алексей помогал организовывать распределение продовольствия и медикаментов, налаживал коммуникацию между разными секторами бункера.")
                al("Мы должны учиться на ошибках прошлого. Больше никакой тирании, только справедливость и равенство для всех")
            else:
                n("Пора бежать.")
                renpy.scene()
                renpy.show("bg hall_catacombs")
                renpy.with_statement(fade)
                n("Алексей метнулся вглубь туннеля, чувствуя, как Королева направила своих заражённых в погоню за ним. Он мчался по коридорам, освещая себе путь тусклым светом фонаря. Его единственным оружием была арматура, которую он сжимал в руке. Позади раздавались ужасающие крики — заражённые приближались.")
                renpy.show("bg mines")
                renpy.with_statement(fade)
                n("Бег по старым туннелям привёл его к заброшенной шахте. Здесь давно никто не бывал: сломанные рельсы, прогнившие балки и ржавые вагонетки создавали лабиринт из обломков. Алексей понимал, что это его единственный шанс уйти от погони. Позади раздавался топот множества ног, заражённые приближались.")
                renpy.show("alexey thoughtful")
                al("\"Эти шахты должны вывести на верхние уровни... если только я смогу найти верный путь.\"")
                renpy.hide("alexey")
                n("Задерживаться было нельзя. Он заметил узкую шахтную лестницу, ведущую вверх, и без раздумий начал карабкаться. Лестница была покрыта ржавчиной, скрипела и шаталась, но Алексей продолжал лезть, ощущая, как старая конструкция дрожит под его весом.")
                n("Пока Алексей карабкался по лестнице, заражённые неуклонно приближались. Внезапно он услышал треск — лестница начала обрушаться. Он едва успел прыгнуть на платформу выше, прежде чем металлические прутья рухнули вниз вместе с преследователями.")
                n("Теперь Алексей оказался в узком тоннеле, ведущем вверх. Вокруг него были шахты, из которых тянулись ржавые трубы и вентиляционные шахты. Он увидел впереди массивную старую дверь с проржавевшей ручкой. Это был выход на верхние уровни бункера, но дверь была заперта.")

                choice = renpy.display_menu([
                    ("Попробовать выбить дверь арматурой", 1),
                    ("Обыскать окрестности в поисках альтернативного выхода", 2)
                ])
                if choice == 1:
                    al("«Нет, думаю против такой двери это все-таки бесполезно»")
                elif choice == 2:
                    al("«Черт, у меня нет на это времени!»")
                n("Алексей бросился к старой вагонетке, которая была загружена углём. Он быстро сообразил, что может использовать её как таран. Он изо всех сил толкнул вагонетку, направив её на запертую дверь. Вагонетка с громким грохотом врезалась в неё, и дверь поддалась.")
                n("Но в этот момент заражённые вырвались из туннеля за его спиной. Алексей, сжав арматуру, приготовился к последней битве. Он бил изо всех сил, размахивая прутом, отбиваясь от тварей, пока они прорывались к нему. Каждый удар отзывался болью в мышцах, но он продолжал сражаться, отбивая одну за другой.")
                n("Наконец, когда последние заражённые рухнули на землю, Алексей, задыхаясь, бросился в открывшийся проход. Свет дневного освещения сверху ослепил его на мгновение.")
                renpy.show("bg door")
                renpy.with_statement(fade)
                n("Он ускорил шаг, и, наконец, оказался у врат, ведущих на верхние уровни бункера. Это было место, которое держалось под строгой охраной. Бункер, укрывавший последних выживших, теперь стал ареной для великой борьбы. Алексей понял, что только если он пробьёт себе путь наверх, он сможет предупредить правительство и уничтожить Королеву.")
                n("С отчаянным взглядом он подошёл к массивной двери, но тут его ждал неожиданный поворот: на его пути встали два солдата в броне с автоматами.")
                renpy.show("soldier_1", [right])
                renpy.show("soldier_2",[cright])
                renpy.show("alexey normal", [left])
                renpy.with_statement(dissolve)
                s("Стой! Кто ты?")
                n("Алексей поднял руки в знак миролюбия, но арматуру держал так, как будто был готов в любую секунду защищаться. Он почувствовал, как его сердце бьётся быстрее.")
                al("Я... я выжил в катакомбах. Я видел, что творится внизу. Королева должна быть остановлена. Мы можем ещё победить, но нужно действовать быстро!")
                n("Солдаты обменялись взглядами. Алексей понял, что они сомневаются, но не могут его просто так отпустить. Один из солдат нажал на рацию")
                s("Товарищ командир, мы столкнулись с Алексеем... Он говорит, что видел Королеву. Что прикажете делать?")
                n("Через несколько секунд пришёл ответ.")
                kom("Пропустите его. Нужно выяснить, что он видел. Ведите ко мне.")
                renpy.scene()
                renpy.show("bg headquarters")
                renpy.with_statement(fade)
                n("Солдаты кивнули и отступили. Алексей прошёл через проход, ведущий к штабным помещениям правительства. Внутри он увидел группу людей в строгих униформах, сидящих за огромными столами. Один из них, высокий мужчина с холодным взглядом, встал, когда Алексей вошёл.")
                renpy.show("commander", [right])
                renpy.show("alexey normal", [left])
                renpy.with_statement(dissolve)
                kom("Вы... Алексей, вы выжили? Что происходит?")
                n("Алексей глубоко вздохнул, понимая, что только здесь, в этой комнате, он может наконец сказать правду. Он рассказал о Королеве, её намерениях, о заражённых, которые под её контролем. Он объяснил, как она манипулирует ими, и что без немедленного вмешательства весь бункер окажется под её властью.")
                kom("Вы предлагаете уничтожить её?")
                n("Алексей утвердительно кивнул.")
                al("Да. Мы должны сделать это до того, как она возьмёт контроль над этим местом. Она не остановится, пока не уничтожит нас всех.")
                al("Мы должны попасть в её логово, и только тогда можно будет положить конец всему этому.")
                renpy.show("nikolay normal_2", [cright])
                renpy.with_statement(dissolve)
                nik("Он прав. Нам нужно уничтожить Королеву, или всё это закончится тем, что заражённые поработят бункер.")
                kom("Ты уверен, что это возможно? Ты понимаешь, что рискуешь всем?")
                n("Алексей, не раздумывая, кивнул. Он уже знал, что делать.")
                al("Я готов. Мне нечего терять.")
                nik("Я пойду с вами.")
            
                renpy.scene()
                renpy.show("bg black")
                renpy.with_statement(fade)
                n("Командир отдал приказ, и Алексей в сопровождении нескольких опытных солдат двинулся в глубь бункера, в самое сердце логова Королевы. Шаг за шагом они продвигались, каждый поворот мог привести к смертельной ловушке. Алексей чувствовал, как его силы иссякают, но он не мог остановиться. Он знал, что это их последний шанс.")
                renpy.show("bg hall_catacombs")
                renpy.show("queen")
                renpy.show("alexey angry", [left])
                renpy.with_statement(fade)
                renpy.sound.play("whisper.mp3")
                n("Тёмное помещение встретило их шепотом голосов, который эхом отражался от стен. В центре зала стояла Королева Роя. Она была прекрасна и ужасна одновременно. Её глаза горели алым огнём, а её тело пульсировало жизнью. Она улыбалась, будто всё это было частью её плана.")
                q("Я могу дать тебе всё, что ты хочешь. Месть, силу. Ты сможешь контролировать, как я.")
                n("Алексей, весь в крови и поту, стоял, сжимая арматуру. Он чувствовал, как заражённые начинают подходить ближе, но не мог отступить.")
                al("Я уничтожу тебя!")
                q("Ты не осознаёшь, Алексей. Всё это — лишь игра. Ты думаешь, что сможешь победить? ")
                n("Она взмахнула рукой, и зараженные начали окружать его. Тело немного затряслось от паники.")
                renpy.show("nikolay angry_2", [right])
                renpy.with_statement(dissolve)
                n("Но в этот момент он почувствовал холодный взгляд Николая, который, несмотря на страх, шагнул вперёд. Он держал в руках ружье с ампулой антидота — единственным средством, способным уничтожить Королеву.")
                n("Николай рассказал, что долгое время работал над ним, зная, что когда-то все эксперименты приведут к полному краху.")
                n("Понадобился лишь один точный выстрел.")
                nik("Ты не получишь нас!")
                n("Королева взревела, пытаясь остановить их, но было слишком поздно. Ампула с антидотом ударила её прямо в грудь. В этот момент её крик эхом разнесся по всему бункеру. Вокруг неё начали распадаться темные облака.")
                n("Её тело стало таять, превращаясь в чёрную тень. Заражённые, стоявшие вокруг, начали отступать, их глаза потускнели, и они падали, теряя всякую жизненную силу.")
                renpy.hide("queen")
                renpy.with_statement(dissolve)
                renpy.show("alexey normal", [left])
                renpy.with_statement(dissolve)
                al("Мы смогли это сделать…")
                renpy.scene()
                renpy.show("bg hallway")
                renpy.with_statement(fade)
                renpy.music.play("bg_music.mp3")
                n("Алексей и Николай вернулись на верхние уровни. Алексей был измучен.")
                n("Правительство объявило о победе, но мир не изменился. Алексей понимал, что правительство осталось у власти, и кто знает, сколько ещё времени до того, как история повторится.")
                al("Я сделал всё, что мог. Но борьба еще не закончена")









