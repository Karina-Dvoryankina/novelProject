init python:
    class AlKillerState(State):
        def Invoke(self, data):

            data.branch = 3
            renpy.scene()
            renpy.show("bg flat")
            renpy.with_statement(fade)
            renpy.sound.play("sad.mp3")
            n("Алексей возвращается в свою квартиру, но, несмотря на то, что тело его жены уже забрали, внутренний пустотный шок и горечь остаются с ним. Он с трудом переступает порог и замолкает в коридоре, чувствуя, как тяжесть от потери накрывает его.")
            
            renpy.show("alexey sad", [right])
            renpy.with_statement(dissolve)
            al(" «Почему я не заметил? Почему ничего не заподозрил?»")
            n("Тишина квартиры теперь кажется почти живой, отголоски недавнего ужаса всё ещё витают в воздухе, как зловещая тень. Алексей стоит, не зная, что делать дальше. Он обходит комнату, и его взгляд находит знакомые вещи: фотографии, одежду жены, её книги на полке. Всё это напоминает ему, что она была такой живой, и теперь этого нет.")
            n("Он чувствует, как его тело выматывает усталость. Дни, наполненные ужасом, расследованием, гнусными догадками, наконец заставляют его уйти в сон. Но перед тем как он погружается в бессознательное состояние, его ум снова и снова возвращается к трагедии, не давая ему покоя.")
            n("Алексей погружается в тревожный сон, где всё вокруг кажется чуждым и расплывчатым.")
            
            renpy.hide("alexey sad")
            renpy.with_statement(dissolve)
            renpy.sound.play("wary.mp3")
            renpy.show("bg laboratory")
            renpy.with_statement(fade)
            renpy.show("alexey surprised", [left])
            renpy.with_statement(dissolve)
            n("Он сидит привязанный к медицинскому креслу, кожа холодная от пота. Вокруг — стерильный, безжизненный белый свет и высокие стены лаборатории. Перед ним стоит человек в белом халате.")
            
            renpy.show("doctor",[right])
            renpy.with_statement(dissolve)

            n("Ощущение безвыходности и боли. Он чувствует, как что-то вводят в вену, и уже не способен сопротивляться. Голова кружится, тело онемело. Он пытается что-то сказать, но слова не выходят. Странный, неприятный запах химии проникает в его легкие, и его мир начинает исчезать.")

            renpy.show("bg black")
            renpy.hide("alexey surprised")
            renpy.hide("doctor")
            renpy.show("bg laboratory")
            renpy.with_statement(fade)
        
            n("В голове всё мрак. Он сидит в том же кресле, но теперь рядом с ним стоит кто-то знакомый. Это брат Елены, Николай")

            renpy.show("nikolay regretful", [right])
            renpy.with_statement(dissolve)

            n("Он не может понять, что происходит, но Николай стоит и смотрит на него как-то отстранённо, с беспокойным выражением лица. Алексей пытается что-то спросить, но его губы не могут произнести ни слова. В его вену снова вводят препарат, и его сознание темнеет.")
            renpy.hide("nikolay regretful")
            renpy.show("bg flat")
            renpy.with_statement(fade_fast)
            n("Алексей находит в себе силы проснуться, но перед глазами всё ещё стоят сцены из сна.")
            
            renpy.show("alexey surprised",[left])
            renpy.with_statement(dissolve)
            al("«Какого черта? Это был сон? Не понимаю, все было так реально…»")
            
            renpy.sound.play("background_music.mp3")

            if data.syringe==True:
                n("Макаров решает пойти к Николаю. Это должно прояснить ситуацию. Алексей всё ещё надеется, что брат что-то знает. Он надеется на ответ, что-то, что поможет ему раскрыть тайну.")
                n("Он подходит к дверям квартиры Николая. Сердце бьётся чаще, когда он думает о том, что его брат, возможно, что-то знает.")

                renpy.show("bg flat_nik")
                renpy.with_statement(fade_fast)
                n("Николай открывает дверь с потухшим, усталым взглядом. Он выглядит измождённым и нервным, его лицо иссушено болезненным выражением.")

                renpy.show("alexey normal", [left])
                renpy.with_statement(dissolve)
                al("«Ты должен знать, что это такое, Николай. Я нашел шприц рядом с её телом.»")

                n("Николай молчит, смотрит на шприц и, наконец, его лицо меняется. Он вглядывается в него, и на лице появляется выражение, которое Алексей не может понять.")
                renpy.show("nikolay surprised_2", [right])
                renpy.with_statement(dissolve)
                nik("«Ты… ты нашёл это?»")
                n("Его голос дрожит.")
                renpy.show("nikolay regretful_2", [right])
                renpy.with_statement(dissolve)
                nik("«Это… антидот. Недоработанный, но антидот. Елена… она просила меня передать один образец ей… на всякий случай.»")
                n("Алексей чувствует, как холод пробегает по его телу. Это странное и тревожное открытие подтверждает его подозрения, что всё намного сложнее, чем он думал. Воспоминания начинают расплываться, и вдруг он осознаёт, что стал частью чего-то ужасного, что связано с антидотом.")
                renpy.show("alexey normal", [left])
                renpy.with_statement(dissolve)
                al("Что это за антидот? Почему она просила его?")
                n("Николай делает паузу, его взгляд становится отстранённым, как будто он не решается сказать правду.")

                renpy.show("nikolay normal_2", [right])
                renpy.with_statement(dissolve)
                nik(" Это не просто антидот… Это наша подстраховка, Алексей. Мы… мы сделали ошибку. Всё это — часть эксперимента. Мы не знали, к чему это приведёт.")
                n("Алексей осознаёт, что его брат и Елена были связаны с чем-то гораздо более опасным, чем он мог себе представить. Его тело напрягается, когда он понимает, что является частью этого эксперимента.")
                renpy.show("nikolay regretful_2", [right])
                renpy.with_statement(dissolve)
                nik("Ты не понимаешь, ты был частью этого, Алексей. Ты сам… ты сам заражён. Ты просто не помнишь. Мы все под колпаком.")
                n("Алексей стоит, словно парализованный. Он чувствует, как что-то тёмное, страшное, надвигается на него. И вот тогда его осознание доходит до полного ужаса: он чем-то заражён. Возможно, её смерть — следствие этого эксперимента.")
                n("Вдруг дверь сзади открывается, и на пороге появляются люди в форме — сотрудники безопасности.")
                renpy.hide("nikolay normal_2")
                renpy.with_statement(dissolve)

                renpy.show("sb", [right])
                renpy.with_statement(dissolve)
                sb(" Макаров Алексей Юрьевич, вы арестованы по подозрению в убийстве вашей жены.")

                n("Алексей пытается что-то сказать, но его выводят под руки. Он не в силах сопротивляться. Внутри его головы бушует шторм из эмоций, но он просто не может ничего с этим поделать")
                n("Его дальнейшая судьба — катакомбы. Место, где уже нет места для вопросов и оправданий. Где он будет всё больше понимать, что потерян, что потерял контроль и что, возможно, никогда не узнает, что на самом деле произошло.")
                n("Залпы мыслей — непонятных, нерешенных, незавершенных — продолжают рваться в голове, но всё, что он может сделать, это принять свою участь.")
            
            else:
                choice = renpy.display_menu([
                ("Поискать таблетки.", "pills"),
                ("Поискать выпивку", "drink"),])

                if choice == "pills":
                    data.drink = False
                    data.karma +=10
                    n("Алексей, тяжело дыша, подходит к тумбочке, где Елена всегда хранила свои вещи. Он хорошо помнит, что аптечка обычно находилась у неё — как будто она всегда была готова к любому случаю. Его руки слегка дрожат, когда он выдвигает ящик, чувствуя, как кожа на затылке покрывается мурашками.")
                    renpy.show("alexey normal", [right])
                    renpy.with_statement(dissolve)
                    al(" «Просто таблетки. Мне нужно что-то, чтобы унять эту адскую боль. Не сейчас, я не могу потерять сознание здесь…»")
                    renpy.sound.play("wary.mp3")
                    n("Выдвинув ящик, Алексей начинает шарить рукой внутри в поисках болеутоляющего, когда вдруг замечает, что дно ящика странно шатается, будто неплотно прилегает к стенке.")
                    renpy.show("alexey surprised", [right])
                    renpy.with_statement(dissolve)
                    al("Что за…? Это что, потайное дно?")
                    n("Он подходит к кухонному блоку и берёт нож, осторожно подковыривая дно ящика. С трудом приподняв его, Алексей замирает в изумлении. Под фальшивым дном скрываются стопка бумаг, медицинские анализы и старый блокнот с потрёпанной обложкой. Сердце начинает биться ещё быстрее, когда он осознаёт, что держит в руках что-то сокровенное, что-то, что Елена скрывала от него.")
                    renpy.show("notepad")
                    renpy.show("alexey surprised", [right])
                    renpy.with_statement(dissolve)
                    al("Не хочется верить, что Елена что-то скрывала от меня, но похоже, что это всё-таки так…")
                    n("Алексей осторожно открывает блокнот и начинает перелистывать страницы, исписанные аккуратным почерком его жены. Чем больше он читает, тем сильнее нарастает в нём тревога. Строки словно оживают перед его глазами, превращая каждое слово в острое лезвие, врезающееся в его душу.")
                    renpy.hide("notepad")
                    renpy.show("elena normal", [left])
                    renpy.with_statement(dissolve)
                    el("«День 1. Алексей был заражён, но не знает об этом. Они хотят изучить воздействие вируса на живых людей, используя его как подопытного. Как я могу смотреть ему в глаза, зная, что происходит?»")
                    el("«День 5. Изменения становятся заметны. Его агрессия нарастает. Он не понимает, что с ним происходит, списывает всё на усталость. А я вынуждена делать вид, что ничего не замечаю...»")
                    el("«День 12. Алексей всё чаще теряет контроль. Он становится опасен. Ночью я слышу, как он разговаривает сам с собой, его голос срывается на крик. Мне страшно... боюсь за себя и за него. Но я не могу уйти, не могу бросить его в этом аду.»")
                    el("«День 20. Вчера ночью он почти набросился на меня. В его глазах не было ни капли осознания. Это уже не мой Алексей, а кто-то... кто-то другой. Николай говорит, что это лишь вопрос времени, прежде чем вирус полностью завладеет его разумом.»")

                    renpy.show("alexey surprised", [right])
                    renpy.with_statement(dissolve)
                    al("«Значит, всё это было правдой? Она знала... знала и молчала. Елена, как ты могла… Это не я, это... это вирус. Я был под их контролем всё это время…»")
                    n("Алексей чувствует, как его колени подгибаются. Он опускается на пол, сжимая в руках листы бумаги, словно это его единственная связь с тем, что осталось от его прежней жизни. В голове бушует хаос. Его предали. Те, кого он любил, те, кому доверял. И сейчас он — лишь часть какого-то чудовищного эксперимента.")
                    renpy.hide("elena")
                    renpy.with_statement(dissolve)
                else:
                    n("Алексей с тоской оглядывает запылённую комнату. Всё, что случилось, словно давит на него тяжёлой плитой, и единственное, о чём он сейчас может думать — это как заглушить этот адский шум в своей голове. Всё, что ему нужно, — это глоток чего-нибудь крепкого, чтобы забыться хоть на миг.")
                    renpy.show("alexey sad", [right])
                    renpy.with_statement(dissolve)
                    al("«Я больше не могу. Мне нужно что-то, что затмит эту боль. Хватит… хотя бы на несколько минут забыться, не думать...»")
                    n("Он резко поднимается и начинает судорожно искать выпивку. Руки дрожат, когда он открывает шкафчики и выдвигает ящики, в которых раньше Елена хранила свои вещи. Аптечки, коробки с лекарствами, стопки каких-то бумаг — ничего из этого не нужно, лишь бы найти бутылку.")
                    renpy.show("alexey angry", [right])
                    renpy.with_statement(dissolve)
                    al("Где же она? Я точно помню, что была тут... Елена, ну не могла же ты всё выбросить!")
                    n("Алексей открывает дверцу старого комода и начинает рыться внутри. Пустые полки, старые банки, забытые таблетки — всё это лишь усиливает его раздражение. От безысходности и внутреннего напряжения он с силой ударяет кулаком по тумбочке, отчего та сотрясается. В ярости он хватает её за боковины и начинает трясти, словно пытаясь вытрясти из неё скрытую бутылку.")
                    al(" «Чёрт побери! Всё, что мне нужно, — это чёртов глоток. Почему всё вокруг меня рушится?!»")
                    renpy.sound.play("wary.mp3")
                    renpy.show("bg flat", at_list=[shake_large])
                    n("В порыве ярости Алексей переворачивает тумбочку, та с грохотом падает на бок, высыпая содержимое на пол. Гремят таблетки, скатываясь в разные стороны, сминаются старые бумаги. Но его внимание привлекает одна странная деталь — дно тумбочки кажется двойным.")
                    renpy.hide("bg flat")
                    renpy.with_statement(fade)
                    renpy.show("bg flat")
                    renpy.with_statement(fade)

                    renpy.hide("alexey angry")
                    renpy.show("alexey normal", [right])
                    renpy.with_statement(dissolve)
                    al("Что это такое? Потайное дно?") 
                    renpy.show("alexey normal", [right]) 
                    renpy.with_statement(dissolve)
                    n("Резко подавив внезапный порыв отчаяния, Алексей садится на корточки и начинает ковырять дно тумбочки. Ему удаётся поддеть фальшивую панель, и она с тихим щелчком отходит в сторону. Под ней он находит стопку пожелтевших листов и старый кожаный блокнот, которые явно скрывали от посторонних глаз.")
                    renpy.show("notepad")
                    renpy.show("alexey normal", [right])
                    renpy.with_statement(dissolve)
                    al("Что ещё ты от меня скрывала, Елена?")
                    renpy.hide("alexey normal")
                    renpy.with_statement(dissolve)
                    renpy.show("alexey normal", [right])
                    renpy.with_statement(dissolve)
                    renpy.hide("notepad")
                    n("Трясущимися руками он открывает блокнот. Листая страницы, исписанные аккуратным почерком Елены, Алексей чувствует, как в нём нарастает холодное осознание. Эти записи словно оживают, вытягивая его в прошлое.")
                    renpy.show("alexey normal", [right])
                    renpy.with_statement(dissolve)
                    renpy.show("elena normal", [left])
                    renpy.with_statement(dissolve)
                    el("«День 3. Алексей изменился с тех пор, как его заразили. Я вижу это в его глазах, в его жестах. Он стал более раздражительным и агрессивным. Но я не могу ему ничего сказать — они следят за каждым моим шагом…»")
                    el("«День 7. Сегодня он снова потерял контроль. Николай уверяет, что это временные симптомы, но я вижу, как вирус разъедает его изнутри. Боюсь, что однажды он просто… не вернётся. Но разве это оправдывает то, что мы сделали? Я стала частью этого кошмара…»")
                    el("«День 15. Вчера ночью Алексей ударил меня, но, кажется, сам этого не помнит. Он был в ярости, словно это был не он, а какой-то зверь. Мне страшно находиться рядом с ним, но я обязана оставаться здесь, чтобы наблюдать за его состоянием. Николай говорит, что это ради науки… но в чём же наша наука, если мы превращаем людей в монстров?»")
                    el("«День 23. Сегодня Алексей бросился на меня с ножом, но потом остановился, словно очнувшись. Его глаза были полны ужаса, и он умолял меня уйти. Но как я могу оставить его? Это не он виноват… это вирус. Но как долго я смогу скрывать это от него?»")

                    renpy.hide("elena normal")
                    renpy.with_statement(dissolve)
                    renpy.hide("alexey surprised")
                    renpy.with_statement(dissolve)
                    renpy.show("alexey surprised", [right])
                    renpy.with_statement(dissolve)
                    al("«Значит, всё это было правдой? Они использовали меня, как подопытного кролика… Елена, ты знала и молчала.»0")
                n("В дверь начинают стучать и не дожидаясь ответа, входят несколько людей с оружием наперевес.")

                renpy.show("sb", [left])
                renpy.with_statement(dissolve)
                sb("Макаров Алексей Юрьевич, вы арестованы.")
                    
                renpy.show("alexey surprised", [right])
                renpy.with_statement(dissolve)
                al("Что?")
                n(" Алексей встаёт, пытаясь осознать происходящее.")
                al("Вы что, с ума сошли? Я ничего не сделал!")
                n("Его слова тонут в тишине. Второй человек подходит и, не говоря ни слова, показывает ему документы, на которых, как ему кажется, написано его имя. Но всё происходит так быстро, что Алексей не успевает даже прочитать.")
                sb(" Макаров Алексей Юрьевич, вы обвиняетесь в убийстве вашей жены, Елены Макаровой. Мы нашли шприц, которым совершено убийство, на нем есть ваши отпечатки.")
                n("Словно гром среди ясного неба, эти слова врезаются в сознание Алексея. Шприц? Его отпечатки? Он ошеломлён.")
                al(" Что? Как это возможно? Я… я не трогал никакой шприц!")
                n("Алексей отходит назад, его лицо бледнеет от страха и недоумения.")
                al(" Что вы мне приписываете?")
                n("Один из сотрудников молча вытаскивает из кармана фотографию — на ней шприц. Макарова посещает смутное ощущение, что он не первый раз видит его.")
                sb("На нем ваши отпечатки. И им убили Елену Макарову. Делайте выводы сами.")
                n("Голос мужчины звучит неумолимо, как приговор.")
                n("Алексей отступает, его тело словно обвисает, а мысли не могут собрать в себе хоть какое-то объяснение происходящему. Его мускулы напряжены, но он не может найти слов.")
                renpy.show("alexey normal", [right])
                renpy.with_statement(dissolve)
                al("Я не… я не знал о нём! Я не сделал этого.")
                n("Он продолжает пытаться оправдаться, но его слова тонут в железном молчании служителей правопорядка. ")
                n("Один из мужчин решает действовать быстрее. Он берёт Алексея за плечо, не давая тому времени на сопротивление.")
                sb(" Это не обсуждается, Макаров. Мы вас обвиняем в убийстве вашей жены, и вы будете отправлены в катакомбы. Все документы и доказательства против вас собраны, и решение уже принято.")
                n("От этих слов Алексей чувствует, как земля уходит из-под ног. Он пытается возразить, но его уже выводят из квартиры. Всё происходит так стремительно, что он не успевает осознать до конца. Как так получилось, что он оказался в центре этого кошмара?")
                n("Его дальнейшая судьба — катакомбы. Место, где уже нет места для вопросов и оправданий. Где он будет всё больше понимать, что потерян, что потерял контроль и что, возможно, никогда не узнает, что на самом деле произошло.")
                n("Залпы мыслей — непонятных, нерешенных, незавершённых — продолжают рваться в голове, но всё, что он может сделать, это принять свою участь.")

            return CatacombsState()
